syntax = "proto3";

package common.v1;

// 消息的指令类型。
enum CommandType {
  COMMAND_TYPE_UNSPECIFIED = 0;

  // 心跳指令。
  COMMAND_TYPE_HEARTBEAT = 1;

  // 上行消息:  frontend -> gateway -> backend。
  COMMAND_TYPE_UPSTREAM = 2;
  // 上行消息 ack: gateway -> frontend。
  COMMAND_TYPE_UPSTREAM_ACK = 3;

  // 下行消息: backend -> gateway -> frontend。
  COMMAND_TYPE_DOWNSTREAM = 4;
  // 下行消息: frontend -> gateway。
  COMMAND_TYPE_DOWNSTREAM_ACK = 5;

  // 重定向指令。
  COMMAND_TYPE_REDIRECT = 6;

  // 限流指令：gateway -> frontend。
  COMMAND_TYPE_RATE_LIMIT_EXCEEDED = 7;
}

// 消息体的序列化类型。
// 目前只支持 protobuf 和 json 两种（生产环境推荐使用 protobuf）。
enum SerializeType {
  SERIALIZE_TYPE_UNSPECIFIED = 0;
  SERIALIZE_TYPE_PROTOBUF = 1;
  SERIALIZE_TYPE_JSON = 2;
}
